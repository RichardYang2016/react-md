{"version":3,"sources":["../../src/js/BottomNavigations/BottomNavigation.js"],"names":["BottomNavigation","props","visible","initiallyVisible","defaultVisible","state","portalVisible","activeIndex","defaultActiveIndex","dynamic","_addTouchEvents","nextProps","_removeTouchEvents","nextState","onVisibilityChange","_timeout","clearTimeout","className","actions","colored","lastChild","animate","portal","propLinks","links","propActiveIndex","propRenderNode","renderNode","onNavChange","dynamicThreshold","transitionDuration","onChange","containerStyle","containerClassName","transitionName","transitionEnterTimeout","transitionLeaveTimeout","fixed","length","context","navigation","map","action","index","key","_handleNavChange","propTypes","style","object","string","propName","component","args","len","Error","arrayOf","shape","label","node","isRequired","icon","element","iconChildren","iconClassName","oneOfType","func","bool","number","initialActiveIndex","array","defaultProps","contextTypes","window","_handleTouchStart","_handleTouchMove","_handleTouchEnd","_animateIn","setTimeout","setState","_animateOut","e","pageY","changedTouches","_pageY","_scrolling","touchY","passedThreshold","Math","abs"],"mappings":"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","file":"BottomNavigation.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\nimport deprecated from 'react-prop-types/lib/deprecated';\r\n\r\nimport getField from '../utils/getField';\r\nimport controlled from '../utils/PropTypes/controlled';\r\nimport { addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\r\nimport Portal from '../Helpers/Portal';\r\nimport Paper from '../Papers/Paper';\r\nimport BottomNav from './BottomNav';\r\n\r\n/**\r\n * The `BottomNavigation` component is an alternative to the `NavigationDrawer` for handling navigation\r\n * only on mobile devices.\r\n */\r\nexport default class BottomNavigation extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * An optional style to apply.\r\n     */\r\n    style: PropTypes.object,\r\n\r\n    /**\r\n     * An optional className to apply.\r\n     */\r\n    className: PropTypes.string,\r\n\r\n    /**\r\n     * A list of objects to generate a bottom navigation link. There must be at least 3 and no more\r\n     * than 5 links. A link gets rendered as the `AccessibleFakeButton` component, so any additional\r\n     * props in the link's shape will be passed along.\r\n     *\r\n     * ```docgen\r\n     * PropTypes.arrayOf(PropTypes.shape({\r\n     *   label: PropTypes.node.isRequired,\r\n     *   icon: PropTypes.element,\r\n     *   component: PropTypes.oneOfType([\r\n     *      PropTypes.func,\r\n     *      PropTypes.string,\r\n     *   ]),\r\n     * }).isRequired\r\n     * ```\r\n     */\r\n    links: (props, propName, component, ...args) => {\r\n      const links = props[propName] || props.actions;\r\n      const len = links.length;\r\n\r\n      if (len < 3) {\r\n        return new Error(\r\n          `Only ${len} \\`${propName}\\` were given to the ${component}. At least 3 are required.`\r\n        );\r\n      } else if (len > 5) {\r\n        return new Error(\r\n          `${len} \\`${propName}\\` were given to the ${component}. No more than 5 may be given.`\r\n        );\r\n      }\r\n\r\n      return PropTypes.arrayOf(PropTypes.shape({\r\n        label: PropTypes.node.isRequired,\r\n        icon: PropTypes.element,\r\n        iconChildren: deprecated(PropTypes.node, 'Use `icon` instead'),\r\n        iconClassName: deprecated(PropTypes.string, 'Use `icon` instead'),\r\n        component: PropTypes.oneOfType([\r\n          PropTypes.func,\r\n          PropTypes.string,\r\n        ]),\r\n      })).isRequired(props, propName, component, ...args);\r\n    },\r\n\r\n    /**\r\n     * Boolean if the bottom navigation should be colored with the primary color or whatever color\r\n     * was a result of the `react-md-theme-bottom-navigations-colored` mixin.\r\n     */\r\n    colored: PropTypes.bool,\r\n\r\n    /**\r\n     * Boolean if the bottom navigation should dynamically appear based on scrolling. When the user\r\n     * scrolls the `dynamicThreshold` amount, this component will either disappear (scrolling down)\r\n     * or appear (scrolling up).\r\n     */\r\n    dynamic: PropTypes.bool,\r\n\r\n    /**\r\n     * The distance a user must scroll before the bottom navigation appears or disappears when it is `dynamic`.\r\n     */\r\n    dynamicThreshold: PropTypes.number.isRequired,\r\n\r\n    /**\r\n     * An optional function to call when a link has been clicked. The callback will\r\n     * include the new active index and the click event.\r\n     *\r\n     * ```js\r\n     * onNavChange(newActiveIndex, event);\r\n     * ```\r\n     */\r\n    onNavChange: PropTypes.func,\r\n\r\n    /**\r\n     * An optional active index to use. This will make the component controlled and require the\r\n     * `onNavChange` prop to be defined.\r\n     */\r\n    activeIndex: controlled(PropTypes.number, 'onNavChange', 'defaultActiveIndex'),\r\n\r\n    /**\r\n     * The index for the link that is active by default.\r\n     */\r\n    defaultActiveIndex: PropTypes.number.isRequired,\r\n\r\n    /**\r\n     * Boolean if the bottom navigation is visible by default. This *should* probably always\r\n     * be true.\r\n     */\r\n    defaultVisible: PropTypes.bool.isRequired,\r\n\r\n    /**\r\n     * The component to render the bottom navigation as.\r\n     */\r\n    component: PropTypes.oneOfType([\r\n      PropTypes.func,\r\n      PropTypes.string,\r\n    ]).isRequired,\r\n\r\n    /**\r\n     * Boolean if the Portal's functionality of rendering in a separate react tree should be applied\r\n     * to the bottom navigation.\r\n     *\r\n     * @see {@link Helpers/Portal}\r\n     */\r\n    portal: PropTypes.bool,\r\n\r\n    /**\r\n     * Since the `BottomNavigation` component uses the `Portal` component, you can pass an optional\r\n     * HTML Node to render in.\r\n     */\r\n    renderNode: PropTypes.object,\r\n\r\n    /**\r\n     * Boolean if the bottom navigation should render as the last child in the `renderNode` or `body`\r\n     * instead of as the first.\r\n     */\r\n    lastChild: PropTypes.bool,\r\n\r\n    /**\r\n     * The transition duration for the dynamic bottom navigation to appear or disappear. This should\r\n     * match the `$md-bottom-navigation-transition-time` variable.\r\n     */\r\n    transitionDuration: PropTypes.number.isRequired,\r\n\r\n    /**\r\n     * An optional function to call when the visibility of the bottom navigation changes. The callback\r\n     * will include the new visibility.\r\n     *\r\n     * ```js\r\n     * onVisibilityChange(!visible);\r\n     * ```\r\n     */\r\n    onVisibilityChange: PropTypes.func,\r\n\r\n    /**\r\n     * Boolean if the label on a shifting navigation should animate in and out.\r\n     */\r\n    animate: PropTypes.bool,\r\n\r\n    onChange: deprecated(PropTypes.func, 'Use `onNavChange` instead'),\r\n    initiallyVisible: deprecated(PropTypes.bool, 'Use `defaultVisible` instead'),\r\n    initialActiveIndex: deprecated(PropTypes.number, 'Use `defaultActiveIndex` instead'),\r\n    containerStyle: deprecated(PropTypes.object, 'Use `style` instead'),\r\n    containerClassName: deprecated(PropTypes.string, 'Use `className` instead'),\r\n    transitionName: deprecated(PropTypes.string, 'There is no CSSTransitionGroup used anymore'),\r\n    transitionEnterTimeout: deprecated(PropTypes.number, 'Use `transitionDuration` instead'),\r\n    transitionLeaveTimeout: deprecated(PropTypes.number, 'Use `transitionDuration` instead'),\r\n    actions: deprecated(PropTypes.array, 'Use `links` instead'),\r\n  };\r\n\r\n  static defaultProps = {\r\n    animate: true,\r\n    defaultActiveIndex: 0,\r\n    component: 'footer',\r\n    defaultVisible: true,\r\n    transitionDuration: 300,\r\n    portal: false,\r\n    dynamicThreshold: 5,\r\n  };\r\n\r\n  static contextTypes = {\r\n    renderNode: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const visible = typeof props.initiallyVisible === 'boolean' ? props.initiallyVisible : props.defaultVisible;\r\n    this.state = {\r\n      visible,\r\n      portalVisible: visible,\r\n    };\r\n\r\n    if (typeof props.activeIndex === 'undefined') {\r\n      this.state.activeIndex = props.defaultActiveIndex;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.dynamic) {\r\n      this._addTouchEvents();\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { dynamic } = nextProps;\r\n    if (this.props.dynamic === dynamic) {\r\n      return;\r\n    }\r\n\r\n    if (dynamic) {\r\n      this._addTouchEvents();\r\n    } else {\r\n      this._removeTouchEvents();\r\n    }\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    if (this.state.visible !== nextState.visible && nextProps.onVisibilityChange) {\r\n      nextProps.onVisibilityChange(nextState.visible);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props.dynamic) {\r\n      this._removeTouchEvents();\r\n    }\r\n\r\n    if (this._timeout) {\r\n      clearTimeout(this._timeout);\r\n    }\r\n  }\r\n\r\n  _addTouchEvents = () => {\r\n    addTouchEvent(window, 'start', this._handleTouchStart);\r\n    addTouchEvent(window, 'move', this._handleTouchMove);\r\n    addTouchEvent(window, 'end', this._handleTouchEnd);\r\n  };\r\n\r\n  _removeTouchEvents = () => {\r\n    removeTouchEvent(window, 'start', this._handleTouchStart);\r\n    removeTouchEvent(window, 'move', this._handleTouchMove);\r\n    removeTouchEvent(window, 'end', this._handleTouchEnd);\r\n  };\r\n\r\n  _animateIn = () => {\r\n    if (this._timeout) {\r\n      clearTimeout(this._timeout);\r\n    }\r\n\r\n    this._timeout = setTimeout(() => {\r\n      this._timeout = null;\r\n      this.setState({ visible: true });\r\n    }, 17);\r\n\r\n    this.setState({ portalVisible: true });\r\n  };\r\n\r\n  _animateOut = () => {\r\n    if (this._timeout) {\r\n      clearTimeout(this._timeout);\r\n    }\r\n\r\n    this._timeout = setTimeout(() => {\r\n      this._timeout = null;\r\n      this.setState({ portalVisible: false });\r\n    }, this.props.transitionDuration);\r\n\r\n    this.setState({ visible: false });\r\n  };\r\n\r\n  _handleTouchStart = (e) => {\r\n    const { pageY } = e.changedTouches[0];\r\n\r\n    this._pageY = pageY;\r\n    this._scrolling = true;\r\n  };\r\n\r\n  _handleTouchMove = (e) => {\r\n    const { visible } = this.state;\r\n    if (!this._scrolling) {\r\n      return;\r\n    }\r\n\r\n    const touchY = e.changedTouches[0].pageY;\r\n    const { dynamicThreshold } = this.props;\r\n    const passedThreshold = Math.abs(this._pageY - touchY) >= dynamicThreshold;\r\n    if (this._pageY > touchY && visible && passedThreshold) {\r\n      this._pageY = touchY;\r\n      this._animateOut();\r\n    } else if (this._pageY < touchY && !visible && passedThreshold) {\r\n      this._pageY = touchY;\r\n      this._animateIn();\r\n    }\r\n  };\r\n\r\n  _handleTouchEnd = () => {\r\n    this._scrolling = false;\r\n  };\r\n\r\n  _handleNavChange = (index, e) => {\r\n    if (this.props.onNavChange || this.props.onChange) {\r\n      (this.props.onNavChange || this.props.onChange)(index, e);\r\n    }\r\n\r\n    if (typeof this.props.activeIndex === 'undefined') {\r\n      this.setState({ activeIndex: index });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { visible, portalVisible } = this.state;\r\n    const {\r\n      className,\r\n      actions,\r\n      colored,\r\n      dynamic,\r\n      lastChild,\r\n      animate,\r\n      portal,\r\n      /* eslint-disable no-unused-vars */\r\n      links: propLinks,\r\n      activeIndex: propActiveIndex,\r\n      renderNode: propRenderNode,\r\n      onNavChange,\r\n      onVisibilityChange,\r\n      defaultVisible,\r\n      defaultActiveIndex,\r\n      dynamicThreshold,\r\n      transitionDuration,\r\n\r\n      // deprecated\r\n      onChange,\r\n      initiallyVisible,\r\n      containerStyle,\r\n      containerClassName,\r\n      transitionName,\r\n      transitionEnterTimeout,\r\n      transitionLeaveTimeout,\r\n      /* eslint-enable no-unused-vars */\r\n      ...props\r\n    } = this.props;\r\n\r\n    let { links } = this.props;\r\n    if (actions) {\r\n      links = actions;\r\n    }\r\n\r\n    const fixed = links.length === 3;\r\n    const activeIndex = getField(this.props, this.state, 'activeIndex');\r\n    const renderNode = getField(this.props, this.context, 'renderNode');\r\n    const navigation = (\r\n      <Paper\r\n        {...props}\r\n        key=\"navigation\"\r\n        className={cn('md-bottom-navigation', {\r\n          'md-background--card': !colored,\r\n          'md-background--primary': colored,\r\n          'md-bottom-navigation--dynamic': dynamic,\r\n          'md-bottom-navigation--dynamic-inactive': dynamic && !visible,\r\n        }, className)}\r\n        role=\"navigation\"\r\n      >\r\n        {links.map((action, index) => (\r\n          <BottomNav\r\n            {...action}\r\n            animate={animate}\r\n            key={action.key || index}\r\n            index={index}\r\n            onNavChange={this._handleNavChange}\r\n            active={activeIndex === index}\r\n            colored={colored}\r\n            fixed={fixed}\r\n          />\r\n        ))}\r\n      </Paper>\r\n    );\r\n\r\n    if (!portal) {\r\n      return portalVisible ? navigation : null;\r\n    }\r\n\r\n    return (\r\n      <Portal renderNode={renderNode} visible={portalVisible} lastChild={lastChild}>\r\n        {navigation}\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n"]}