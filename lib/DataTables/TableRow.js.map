{"version":3,"sources":["../../src/js/DataTables/TableRow.js"],"names":["TableRow","props","context","_handleMouseOver","e","onMouseOver","header","target","parentNode","classList","_ignoreHoverState","setState","hover","_handleMouseLeave","onMouseLeave","_handleCheckboxClick","checked","rowIndex","_row","onCheckboxClick","toggleSelectedRow","_setRow","row","state","baseId","id","rowId","contains","className","children","selected","selectable","autoAdjust","checkbox","plain","selectableRows","length","count","columns","map","toArray","col","i","adjusted","undefined","cellIndex","propTypes","style","object","string","oneOfType","element","arrayOf","isRequired","onClick","func","bool","contextTypes","childContextTypes"],"mappings":"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","file":"TableRow.js","sourcesContent":["import React, { Component, Children, cloneElement } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport deprecated from 'react-prop-types/lib/deprecated';\r\nimport cn from 'classnames';\r\n\r\nimport getField from '../utils/getField';\r\nimport headerContextTypes from './headerContextTypes';\r\nimport rowContextTypes from './rowContextTypes';\r\nimport TableCheckbox from './TableCheckbox';\r\n\r\n/**\r\n * A component for displaying a row in a `DataTable`. This will\r\n * automatically add a `Checkbox` component to the row if it is not\r\n * a `plain` table.\r\n */\r\nexport default class TableRow extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * An optional style to apply.\r\n     */\r\n    style: PropTypes.object,\r\n\r\n    /**\r\n     * An optional className to apply to the row.\r\n     */\r\n    className: PropTypes.string,\r\n\r\n    /**\r\n     * A single or list of `TableColumn` to display in the table.\r\n     *\r\n     * > The specs \"require\" at least 3 columns for a non-plain data table, but that isn't\r\n     * strictly enforced here.\r\n     */\r\n    children: PropTypes.oneOfType([\r\n      PropTypes.element,\r\n      PropTypes.arrayOf(PropTypes.element),\r\n    ]).isRequired,\r\n\r\n    /**\r\n     * An optional onClick function to call when a row is clicked.\r\n     */\r\n    onClick: PropTypes.func,\r\n\r\n    /**\r\n     * A function to call when the checkbox is clicked. This\r\n     * function will will be called with `(rowIndex, checked, event)`.\r\n     * The `TableBody` and `TableHeader` components will automatically\r\n     * merge in a function to toggle the checkbox.\r\n     */\r\n    onCheckboxClick: PropTypes.func,\r\n\r\n    /**\r\n     * An optional function to call onMouseOver.\r\n     */\r\n    onMouseOver: PropTypes.func,\r\n\r\n    /**\r\n     * An optional function to call onMouseLeave.\r\n     */\r\n    onMouseLeave: PropTypes.func,\r\n\r\n    /**\r\n     * Boolean if the row is currently selected. If this value will be\r\n     * injected by the `TableHeader` or `TableBody` component.\r\n     */\r\n    selected: PropTypes.bool,\r\n\r\n    /**\r\n     * Boolean if the current row is selectable. This value will take precedence over anything inherited\r\n     * by the `DataTable`.\r\n     */\r\n    selectable: PropTypes.bool,\r\n\r\n    autoAdjust: deprecated(PropTypes.bool, 'Manually specify `grow` on one of the columns instead'),\r\n  };\r\n\r\n  static contextTypes = headerContextTypes;\r\n  static childContextTypes = rowContextTypes;\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = { hover: false };\r\n  }\r\n\r\n  getChildContext() {\r\n    const { baseId, ...context } = this.context;\r\n    const id = `${baseId}-${this._row ? this._row.rowIndex : null}`;\r\n    return {\r\n      ...context,\r\n      rowId: context.header ? `${baseId}-toggle-all` : id,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Need to ignore adding the hover state if the mouse is over a menu/menu item\r\n   * or the edit dialog is open.\r\n   *\r\n   * @param {Function} classList - the classList to use for checking cn\r\n   * @return {Boolean} true if the hover state should be ignored for this classList\r\n   */\r\n  _ignoreHoverState(classList) {\r\n    return classList.contains('md-list--menu') || classList.contains('md-edit-dialog');\r\n  }\r\n\r\n  _handleMouseOver = (e) => {\r\n    if (this.props.onMouseOver) {\r\n      this.props.onMouseOver(e);\r\n    }\r\n\r\n    if (this.context.header) {\r\n      return;\r\n    }\r\n\r\n    let target = e.target;\r\n    while (target && target.parentNode) {\r\n      if (target.classList && this._ignoreHoverState(target.classList)) {\r\n        this.setState({ hover: false });\r\n        return;\r\n      }\r\n\r\n      target = target.parentNode;\r\n    }\r\n\r\n    this.setState({ hover: true });\r\n  };\r\n\r\n  _handleMouseLeave = (e) => {\r\n    if (this.props.onMouseLeave) {\r\n      this.props.onMouseLeave(e);\r\n    }\r\n\r\n    if (this.context.header) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ hover: false });\r\n  };\r\n\r\n  _handleCheckboxClick = (checked, e) => {\r\n    const { rowIndex } = this._row;\r\n    if (this.props.onCheckboxClick) {\r\n      this.props.onCheckboxClick(rowIndex, checked, e);\r\n    }\r\n\r\n    this.context.toggleSelectedRow(rowIndex, this.context.header, e);\r\n  };\r\n\r\n  _setRow = (row) => {\r\n    this._row = row;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      children,\r\n      selected,\r\n      selectable,\r\n      /* eslint-disable no-unused-vars */\r\n      onCheckboxClick,\r\n      // deprecated\r\n      autoAdjust,\r\n      /* eslint-enable no-unused-vars */\r\n      ...props\r\n    } = this.props;\r\n\r\n    const { hover } = this.state;\r\n\r\n    let checkbox;\r\n    if (typeof selectable !== 'undefined' ? selectable : (!this.context.plain && this.context.selectableRows)) {\r\n      checkbox = (\r\n        <TableCheckbox\r\n          key=\"checkbox\"\r\n          checked={selected}\r\n          onChange={this._handleCheckboxClick}\r\n          index={this._row ? this._row.rowIndex : null}\r\n        />\r\n      );\r\n    }\r\n\r\n    const length = Children.count(children) - 1;\r\n    const columns = Children.map(Children.toArray(children), (col, i) => {\r\n      let adjusted = col.props.adjusted;\r\n      if (typeof adjusted === 'undefined') {\r\n        adjusted = i === length ? false : undefined;\r\n      }\r\n\r\n      return cloneElement(col, {\r\n        cellIndex: i + (checkbox ? 1 : 0),\r\n        header: getField(col.props, this.context, 'header'),\r\n        adjusted,\r\n      });\r\n    });\r\n\r\n    return (\r\n      <tr\r\n        {...props}\r\n        ref={this._setRow}\r\n        className={cn('md-table-row', className, {\r\n          'md-table-row--hover': hover,\r\n          'md-table-row--active': !this.context.header && selected,\r\n        })}\r\n        onMouseOver={this._handleMouseOver}\r\n        onMouseLeave={this._handleMouseLeave}\r\n      >\r\n        {checkbox}\r\n        {columns}\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n"]}