{"version":3,"sources":["../../src/js/Inks/Ink.js"],"names":["Ink","props","state","active","expanded","pulsing","leaving","nextProps","aborted","_timeout","clearTimeout","_abort","setState","expanding","cb","transitionOverlap","transitionEnterTimeout","setTimeout","pulse","transitionLeaveTimeout","onRemove","style","className","left","top","size","Object","assign","height","width","propTypes","object","string","bool","func","number","isRequired"],"mappings":"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","file":"Ink.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport cn from 'classnames';\r\n\r\nimport TICK from '../constants/CSSTransitionGroupTick';\r\n\r\nexport default class Ink extends PureComponent {\r\n  static propTypes = {\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    aborted: PropTypes.bool,\r\n    onRemove: PropTypes.func,\r\n    left: PropTypes.number.isRequired,\r\n    top: PropTypes.number.isRequired,\r\n    size: PropTypes.number.isRequired,\r\n    transitionOverlap: PropTypes.number.isRequired,\r\n    transitionEnterTimeout: PropTypes.number.isRequired,\r\n    transitionLeaveTimeout: PropTypes.number.isRequired,\r\n    pulse: PropTypes.bool,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      active: false,\r\n      expanded: false,\r\n      pulsing: false,\r\n      leaving: false,\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!this.props.aborted && nextProps.aborted) {\r\n      if (this._timeout) {\r\n        clearTimeout(this._timeout);\r\n      }\r\n\r\n      if (this._abort) {\r\n        this._abort();\r\n      }\r\n\r\n      this.setState({ active: false, expanding: false, pulsing: false, leaving: false });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this._timeout) {\r\n      clearTimeout(this._timeout);\r\n    }\r\n  }\r\n\r\n  componentWillEnter(cb) {\r\n    if (this.props.aborted) {\r\n      cb();\r\n      return;\r\n    }\r\n\r\n    const { transitionOverlap, transitionEnterTimeout } = this.props;\r\n    this._abort = cb;\r\n\r\n    this._timeout = setTimeout(() => {\r\n      this._timeout = setTimeout(() => {\r\n        this._timeout = null;\r\n        this._abort = null;\r\n\r\n        cb();\r\n      }, transitionEnterTimeout - transitionOverlap);\r\n\r\n      this.setState({ expanded: true });\r\n    }, TICK);\r\n\r\n    this.setState({ active: true });\r\n  }\r\n\r\n  componentDidEnter() {\r\n    if (this.props.pulse) {\r\n      this._timeout = setTimeout(() => {\r\n        this._timeout = null;\r\n\r\n        this.setState({ pulsing: true });\r\n      }, this.props.transitionEnterTimeout);\r\n    }\r\n  }\r\n\r\n  componentWillLeave(cb) {\r\n    if (this.props.aborted) {\r\n      cb();\r\n      return;\r\n    }\r\n\r\n    if (this._timeout) {\r\n      clearTimeout(this._timeout);\r\n    }\r\n\r\n    this._abort = cb;\r\n    this._timeout = setTimeout(() => {\r\n      this._timeout = null;\r\n\r\n      cb();\r\n    }, this.props.transitionLeaveTimeout);\r\n\r\n\r\n    this.setState({ pulsing: false, leaving: true });\r\n  }\r\n\r\n  componentDidLeave() {\r\n    if (!this.props.aborted && this.props.onRemove) {\r\n      this.props.onRemove();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      style,\r\n      className,\r\n      left,\r\n      top,\r\n      size,\r\n    } = this.props;\r\n    const { active, expanded, pulsing, leaving } = this.state;\r\n\r\n    return (\r\n      <span\r\n        style={Object.assign({}, style, {\r\n          left,\r\n          top,\r\n          height: size,\r\n          width: size,\r\n        })}\r\n        className={cn('md-ink', {\r\n          'md-ink--active': active,\r\n          'md-ink--expanded': expanded,\r\n          'md-ink--pulsing': pulsing,\r\n          'md-ink--leaving': leaving,\r\n        }, className)}\r\n      />\r\n    );\r\n  }\r\n}\r\n"]}