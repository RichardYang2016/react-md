{"version":3,"sources":["../../src/js/Inks/InkContainer.js"],"names":["InkContainer","state","inks","createInk","pageX","pageY","_createInk","_removeTimeout","setTimeout","_removeInk","props","transitionOverlap","focus","_getKeyboardContainer","_inkContainer","offsetWidth","offsetHeight","x","y","pageOffset","left","top","r","Math","max","ink","size","key","Date","now","slice","push","setState","pop","_container","classList","contains","querySelector","_setContainers","group","parentElement","_initOrRemoveEvents","keyboardDiff","mouseDiff","touchDiff","mouseDisabled","_isListenerDisabled","disabledInteractions","touchDisabled","keyboardDisabled","fn","_handleFocus","_handleKeyDown","getAttribute","window","_handleSubmit","_stopPropagationToFocus","_handleMouseDown","_handleMouseUp","_handleTouchStart","_handleTouchEnd","_maybeDelayClick","waitForInkTransition","_handleRemove","_clicked","click","e","which","keyCode","enter","space","target","addEventListener","_handleBlur","removeEventListener","_skipNextMouse","_mouseLeave","_handleMouseLeave","_aborted","_handleTouchMove","changedTouches","lastInk","length","index","abortedInk","Object","assign","aborted","splice","document","activeElement","type","capture","nextProps","di","ndi","mouseDisabledDiff","_isListenerDisabledDiff","touchDisabledDiff","keyboardDisabledDiff","clearTimeout","interaction","nextDisabledInteractions","i","indexOf","ni","style","className","inkStyle","inkClassName","transitionEnterTimeout","transitionLeaveTimeout","pulse","map","propTypes","object","string","bool","arrayOf","oneOf","number","isRequired","defaultProps"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;;;AAGA;;;;;;;IAOqBA,Y;;;;;;;;;;;;;;kMAoBnBC,K,GAAQ,EAAEC,MAAM,EAAR,E,QAuCRC,S,GAAY,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC5B,YAAKC,UAAL,CAAgBF,KAAhB,EAAuBC,KAAvB;AACA,YAAKE,cAAL,GAAsBC,WAAW,YAAM;AACrC,cAAKD,cAAL,GAAsB,IAAtB;AACA,cAAKE,UAAL;AACD,OAHqB,EAGnB,MAAKC,KAAL,CAAWC,iBAHQ,CAAtB;AAID,K,QAKDC,K,GAAQ,YAAM;AACZ,YAAKC,qBAAL,GAA6BD,KAA7B;AACD,K,QAuBDN,U,GAAa,UAACF,KAAD,EAAQC,KAAR,EAAkB;AAAA,gCACS,MAAKS,aADd;AAAA,UACrBC,WADqB,uBACrBA,WADqB;AAAA,UACRC,YADQ,uBACRA,YADQ;;;AAG7B,UAAIC,UAAJ;AACA,UAAIC,UAAJ;AACA,UAAI,OAAOd,KAAP,KAAiB,WAAjB,IAAgC,OAAOC,KAAP,KAAiB,WAArD,EAAkE;AAChE,YAAMc,aAAa,8BAAe,MAAKL,aAApB,CAAnB;;AAEAG,YAAIb,QAAQe,WAAWC,IAAvB;AACAF,YAAIb,QAAQc,WAAWE,GAAvB;AACD,OALD,MAKO;AACLJ,YAAIF,cAAc,CAAlB;AACAG,YAAIF,eAAe,CAAnB;AACD;;AAED,UAAMM,IAAIC,KAAKC,GAAL,CACR,mCAAoBP,CAApB,EAAuBC,CAAvB,CADQ,EAER,mCAAoBH,cAAcE,CAAlC,EAAqCC,CAArC,CAFQ,EAGR,mCAAoBH,cAAcE,CAAlC,EAAqCD,eAAeE,CAApD,CAHQ,EAIR,mCAAoBD,CAApB,EAAuBD,eAAeE,CAAtC,CAJQ,CAAV;;AAOA,UAAMO,MAAM;AACVL,cAAMH,IAAIK,CADA;AAEVD,aAAKH,IAAII,CAFC;AAGVI,cAAMJ,IAAI,CAHA;AAIVK,aAAKC,KAAKC,GAAL;AAJK,OAAZ;;AAOA,UAAM3B,OAAO,MAAKD,KAAL,CAAWC,IAAX,CAAgB4B,KAAhB,EAAb;AACA5B,WAAK6B,IAAL,CAAUN,GAAV;AACA,YAAKO,QAAL,CAAc,EAAE9B,UAAF,EAAd;AACD,K,QAKDO,U,GAAa,YAAM;AACjB,UAAMP,OAAO,MAAKD,KAAL,CAAWC,IAAX,CAAgB4B,KAAhB,EAAb;AACA5B,WAAK+B,GAAL;;AAEA,YAAKD,QAAL,CAAc,EAAE9B,UAAF,EAAd;AACD,K,QAMDW,qB,GAAwB,YAAM;AAC5B,UAAI,MAAKqB,UAAL,CAAgBC,SAAhB,CAA0BC,QAA1B,CAAmC,yBAAnC,CAAJ,EAAmE;AACjE,eAAO,MAAKF,UAAL,CAAgBG,aAAhB,CAA8B,gBAA9B,CAAP;AACD;;AAED,aAAO,MAAKH,UAAZ;AACD,K,QAMDI,c,GAAiB,UAACC,KAAD,EAAW;AAC1B,UAAIA,UAAU,IAAd,EAAoB;AAClB,cAAKzB,aAAL,GAAqB,2BAAYyB,KAAZ,CAArB;AACA,cAAKL,UAAL,GAAkB,MAAKpB,aAAL,CAAmB0B,aAArC;;AAEA,YAAI,MAAKN,UAAT,EAAqB;AACnB,gBAAKO,mBAAL,CAAyB,MAAK/B,KAA9B;AACD;AACF;AACF,K,QAcD+B,mB,GAAsB,UAAC/B,KAAD,EAAoE;AAAA,UAA5DgC,YAA4D,uEAA7C,IAA6C;AAAA,UAAvCC,SAAuC,uEAA3B,IAA2B;AAAA,UAArBC,SAAqB,uEAAT,IAAS;;AACxF,UAAMC,gBAAgB,MAAKC,mBAAL,CAAyB,OAAzB,EAAkCpC,MAAMqC,oBAAxC,CAAtB;AACA,UAAMC,gBAAgB,MAAKF,mBAAL,CAAyB,OAAzB,EAAkCpC,MAAMqC,oBAAxC,CAAtB;AACA,UAAME,mBAAmB,MAAKH,mBAAL,CAAyB,UAAzB,EAAqCpC,MAAMqC,oBAA3C,CAAzB;;AAEA,UAAIL,YAAJ,EAAkB;AAChB,YAAMQ,MAAQD,mBAAmB,QAAnB,GAA8B,KAAtC,mBAAN;AACA,cAAKpC,qBAAL,GAA6BqC,EAA7B,EAAiC,OAAjC,EAA0C,MAAKC,YAA/C;AACA,cAAKtC,qBAAL,GAA6BqC,EAA7B,EAAiC,SAAjC,EAA4C,MAAKE,cAAjD;;AAEA,YAAI,MAAKlB,UAAL,CAAgBmB,YAAhB,CAA6B,MAA7B,MAAyC,QAA7C,EAAuD;AACrDC,iBAAOJ,EAAP,EAAW,QAAX,EAAqB,MAAKK,aAA1B;AACD;;AAED,YAAIZ,SAAJ,EAAe;AACb,gBAAKT,UAAL,EAAmB,CAACW,aAAD,GAAiB,KAAjB,GAAyB,QAA5C,qBAAqE,WAArE,EAAkF,MAAKW,uBAAvF;AACD;;AAED,YAAIZ,SAAJ,EAAe;AACb,sCAAc,CAACI,aAAf,EAA8B,MAAKd,UAAnC,EAA+C,OAA/C,EAAwD,MAAKsB,uBAA7D;AACD;AACF;;AAED,UAAIb,SAAJ,EAAe;AACb,YAAMO,OAAQL,gBAAgB,QAAhB,GAA2B,KAAnC,mBAAN;AACA,cAAKX,UAAL,CAAgBgB,GAAhB,EAAoB,WAApB,EAAiC,MAAKO,gBAAtC;AACA,cAAKvB,UAAL,CAAgBgB,GAAhB,EAAoB,SAApB,EAA+B,MAAKQ,cAApC;AACD;;AAED,UAAId,SAAJ,EAAe;AACb,oCAAc,CAACI,aAAf,EAA8B,MAAKd,UAAnC,EAA+C,OAA/C,EAAwD,MAAKyB,iBAA7D;AACA,oCAAc,CAACX,aAAf,EAA8B,MAAKd,UAAnC,EAA+C,KAA/C,EAAsD,MAAK0B,eAA3D;AACD;AACF,K,QAEDC,gB,GAAmB,YAAM;AACvB,UAAI,CAAC,MAAKnD,KAAL,CAAWoD,oBAAhB,EAAsC;AACpC;AACD;;AAED,sCAAiB,OAAjB,EAA0B,MAAK5B,UAA/B;AACD,K,QAED6B,a,GAAgB,YAAM;AACpB,UAAI,MAAKC,QAAL,IAAiB,MAAKtD,KAAL,CAAWoD,oBAAhC,EAAsD;AACpD;AACA;AACA;AACAtD,mBAAW,YAAM;AACf,gBAAK0B,UAAL,CAAgB+B,KAAhB;AACD,SAFD,EAEG,CAFH;AAGD;;AAED,YAAKD,QAAL,GAAgB,KAAhB;AACD,K,QAEDZ,c,GAAiB,UAACc,CAAD,EAAO;AACtB,UAAMvC,MAAMuC,EAAEC,KAAF,IAAWD,EAAEE,OAAzB;AACA,UAAMC,QAAQ1C,uBAAd;AACA,UAAM2C,QAAQ3C,uBAAd;AACA;AACA,UAAI2C,SAAUD,SAAS,CAAC,8BAAeH,EAAEK,MAAjB,CAAV,IAAsC,CAACL,EAAEK,MAAF,CAASlC,aAAT,CAAuB,OAAvB,CAArD,EAAuF;AACrF,cAAK2B,QAAL,GAAgB,IAAhB;AACA,cAAK7D,SAAL;AACA,cAAK0D,gBAAL;AACD;AACF,K,QAEDV,Y,GAAe,YAAM;AACnB,UAAI,MAAKa,QAAT,EAAmB;AACjB;AACD;;AAED,YAAK1D,UAAL;AACA,YAAKO,qBAAL,GAA6B2D,gBAA7B,CAA8C,MAA9C,EAAsD,MAAKC,WAA3D;AACD,K,QAEDA,W,GAAc,YAAM;AAClB,YAAK5D,qBAAL,GAA6B6D,mBAA7B,CAAiD,MAAjD,EAAyD,MAAKD,WAA9D;AACA,YAAKhE,UAAL;AACD,K,QAEDgD,gB,GAAmB,UAACS,CAAD,EAAO;AACxB,YAAKF,QAAL,GAAgB,IAAhB;AACA,UAAI,CAAC,4BAAaE,CAAb,CAAD,IAAoB,MAAKS,cAA7B,EAA6C;AAC3C,cAAKA,cAAL,GAAsB,KAAtB;AACA;AACD;;AAED,YAAKC,WAAL,GAAmB,KAAnB;AACA,YAAK1C,UAAL,CAAgBsC,gBAAhB,CAAiC,YAAjC,EAA+C,MAAKK,iBAApD;AACA,YAAKvE,UAAL,CAAgB4D,EAAE9D,KAAlB,EAAyB8D,EAAE7D,KAA3B;AACD,K,QAEDwE,iB,GAAoB,YAAM;AACxB,YAAK3C,UAAL,CAAgBwC,mBAAhB,CAAoC,YAApC,EAAkD,MAAKG,iBAAvD;AACA,YAAKD,WAAL,GAAmB,IAAnB;AACA,YAAKnE,UAAL;AACD,K,QAEDiD,c,GAAiB,YAAM;AACrB,UAAI,MAAKkB,WAAT,EAAsB;AACpB;AACD;;AAED,YAAKf,gBAAL;AACA,YAAK3B,UAAL,CAAgBwC,mBAAhB,CAAoC,YAApC,EAAkD,MAAKG,iBAAvD;AACA,YAAKpE,UAAL;AACD,K,QAEDkD,iB,GAAoB,UAACO,CAAD,EAAO;AACzB,YAAKY,QAAL,GAAgB,KAAhB;AACA,YAAKd,QAAL,GAAgB,IAAhB;AACA,YAAKW,cAAL,GAAsB,IAAtB;AACA,kCAAcrB,MAAd,EAAsB,MAAtB,EAA8B,MAAKyB,gBAAnC;;AAJyB,+BAMAb,EAAEc,cAAF,CAAiB,CAAjB,CANA;AAAA,UAMjB5E,KANiB,sBAMjBA,KANiB;AAAA,UAMVC,KANU,sBAMVA,KANU;;AAOzB,YAAKC,UAAL,CAAgBF,KAAhB,EAAuBC,KAAvB;AACD,K,QAED0E,gB,GAAmB,YAAM;AACvB,qCAAiBzB,MAAjB,EAAyB,MAAzB,EAAiC,MAAKyB,gBAAtC;AACA,UAAME,UAAU,MAAKhF,KAAL,CAAWC,IAAX,CAAgB,MAAKD,KAAL,CAAWC,IAAX,CAAgBgF,MAAhB,GAAyB,CAAzC,CAAhB;AACA,UAAI,CAACD,OAAD,IAAYrD,KAAKC,GAAL,KAAcoD,QAAQtD,GAAR,GAAc,GAA5C,EAAkD;AAChD,cAAKmD,QAAL,GAAgB,KAAhB;AACA;AACD;;AAED,UAAM5E,OAAO,MAAKD,KAAL,CAAWC,IAAX,CAAgB4B,KAAhB,EAAb;AACA,UAAMqD,QAAQjF,KAAKgF,MAAL,GAAc,CAA5B;;AAEA,UAAME,aAAaC,OAAOC,MAAP,CAAc,EAAd,EAAkBL,OAAlB,EAA2B,EAAEM,SAAS,IAAX,EAA3B,CAAnB;AACArF,WAAKsF,MAAL,CAAYL,KAAZ,EAAmB,CAAnB,EAAsBC,UAAtB;;AAEA,YAAKN,QAAL,GAAgB,IAAhB;AACA,YAAK9C,QAAL,CAAc,EAAE9B,UAAF,EAAd,EAAwB,MAAKO,UAA7B;AACD,K,QAEDmD,e,GAAkB,YAAM;AACtB,YAAKe,cAAL,GAAsB,IAAtB;;AAEA,UAAI,MAAKG,QAAT,EAAmB;AACjB;AACD,OAFD,MAEO;AACL,uCAAiBxB,MAAjB,EAAyB,MAAzB,EAAiC,MAAKyB,gBAAtC;AACD;;AAED,YAAKtE,UAAL;AACD,K,QAQD8C,a,GAAgB,UAACW,CAAD,EAAO;AACrB,UAAIuB,SAASC,aAAT,KAA2B,MAAKxD,UAAhC,IAA8C,CAACgC,EAAEK,MAAF,CAASnC,QAAT,CAAkB,MAAKF,UAAvB,CAAnD,EAAuF;AACrF;AACD;;AAED,YAAK2B,gBAAL;AACA,YAAK1D,SAAL;AACD,K,QAEDqD,uB,GAA0B,UAACU,CAAD,EAAO;AAC/B,cAAQA,EAAEyB,IAAV;AACE,aAAK,YAAL;AACE,sCAAcrC,MAAd,EAAsB,KAAtB,EAA6B,MAAKE,uBAAlC,EAA2D,EAAEoC,SAAS,IAAX,EAA3D;AACA;AACF,aAAK,UAAL;AACE,yCAAiBtC,MAAjB,EAAyB,KAAzB,EAAgC,MAAKE,uBAArC,EAA8D,EAAEoC,SAAS,IAAX,EAA9D;AACA;AACF,aAAK,WAAL;AACEtC,iBAAOkB,gBAAP,CAAwB,SAAxB,EAAmC,MAAKhB,uBAAxC,EAAiE,IAAjE;AACA;AACF,aAAK,SAAL;AACEF,iBAAOoB,mBAAP,CAA2B,SAA3B,EAAsC,MAAKlB,uBAA3C,EAAoE,IAApE;AACA;AACF;AAbF;AAeD,K;;;;;8CAjVyBqC,S,EAAW;AAAA,UACLC,EADK,GACE,KAAKpF,KADP,CAC3BqC,oBAD2B;AAAA,UAELgD,GAFK,GAEGF,SAFH,CAE3B9C,oBAF2B;;AAGnC,UAAI+C,OAAOC,GAAP,IAAc,CAAC,KAAK7D,UAAxB,EAAoC;AAClC;AACD;;AAED,UAAM8D,oBAAoB,KAAKC,uBAAL,CAA6B,OAA7B,EAAsCH,EAAtC,EAA0CC,GAA1C,CAA1B;AACA,UAAMG,oBAAoB,KAAKD,uBAAL,CAA6B,OAA7B,EAAsCH,EAAtC,EAA0CC,GAA1C,CAA1B;AACA,UAAMI,uBAAuB,KAAKF,uBAAL,CAA6B,UAA7B,EAAyCH,EAAzC,EAA6CC,GAA7C,CAA7B;AACA,WAAKtD,mBAAL,CAAyBoD,SAAzB,EAAoCM,oBAApC,EAA0DH,iBAA1D,EAA6EE,iBAA7E;AACD;;;2CAEsB;AACrB,UAAI,KAAK3F,cAAT,EAAyB;AACvB6F,qBAAa,KAAK7F,cAAlB;AACD;;AAED,UAAI,KAAK2B,UAAT,EAAqB;AACnB,aAAKO,mBAAL,CAAyB,EAAEM,sBAAsB,CAAC,UAAD,EAAa,OAAb,EAAsB,OAAtB,CAAxB,EAAzB;AACA,aAAKlC,qBAAL,GAA6B6D,mBAA7B,CAAiD,MAAjD,EAAyD,KAAKD,WAA9D;AACD;AACF;;AAGD;;;;;;;;;;;;;;AAoBA;;;;;;4CAOwB4B,W,EAAatD,oB,EAAsBuD,wB,EAA0B;AACnF,UAAMC,IAAIxD,qBAAqByD,OAArB,CAA6BH,WAA7B,CAAV;AACA,UAAMI,KAAKH,yBAAyBE,OAAzB,CAAiCH,WAAjC,CAAX;;AAEA,aAAQE,IAAI,CAAJ,IAASE,MAAM,CAAhB,IAAuBF,KAAK,CAAL,IAAUE,KAAK,CAA7C;AACD;;;wCAEmBJ,W,EAAatD,oB,EAAsB;AACrD,aAAOA,wBAAwBA,qBAAqByD,OAArB,CAA6BH,WAA7B,MAA8C,CAAC,CAA9E;AACD;;AAED;;;;;;;;;;;;AA4CA;;;;;AAUA;;;;;;AAYA;;;;;;AAeA;;;;;;;;;;;;;;AAkKA;;;;;;;;;6BAiCS;AAAA;;AAAA,mBAUH,KAAK3F,KAVF;AAAA,UAELgG,KAFK,UAELA,KAFK;AAAA,UAGLC,SAHK,UAGLA,SAHK;AAAA,UAILC,QAJK,UAILA,QAJK;AAAA,UAKLC,YALK,UAKLA,YALK;AAAA,UAMLlG,iBANK,UAMLA,iBANK;AAAA,UAOLmG,sBAPK,UAOLA,sBAPK;AAAA,UAQLC,sBARK,UAQLA,sBARK;AAAA,UASLC,KATK,UASLA,KATK;;AAWP,UAAM9G,OAAO,KAAKD,KAAL,CAAWC,IAAX,CAAgB+G,GAAhB,CAAoB;AAAA,eAC/B,0DACMvG,KADN;AAEE,iBAAOsG,KAFT;AAGE,iBAAOJ,QAHT;AAIE,qBAAWC,YAJb;AAKE,oBAAU,OAAK9C,aALjB;AAME,6BAAmBpD,iBANrB;AAOE,kCAAwBmG,sBAP1B;AAQE,kCAAwBC;AAR1B,WAD+B;AAAA,OAApB,CAAb;;AAaA,aACE;AAAA;AAAA;AACE,qBAAU,KADZ;AAEE,iBAAOL,KAFT;AAGE,qBAAW,0BAAG,kBAAH,EAAuBC,SAAvB,CAHb;AAIE,eAAK,KAAKrE;AAJZ;AAMGpC;AANH,OADF;AAUD;;;;;;AA3YkBF,Y,CACZkH,S,GAAY;AACjBR,SAAO,oBAAUS,MADA;AAEjBR,aAAW,oBAAUS,MAFJ;AAGjBR,YAAU,oBAAUO,MAHH;AAIjBN,gBAAc,oBAAUO,MAJP;AAKjBtD,wBAAsB,oBAAUuD,IALf;AAMjBtE,wBAAsB,oBAAUuE,OAAV,CAAkB,oBAAUC,KAAV,CAAgB,CAAC,UAAD,EAAa,OAAb,EAAsB,OAAtB,CAAhB,CAAlB,CANL;AAOjB5G,qBAAmB,oBAAU6G,MAAV,CAAiBC,UAPnB;AAQjBX,0BAAwB,oBAAUU,MAAV,CAAiBC,UARxB;AASjBV,0BAAwB,oBAAUS,MAAV,CAAiBC,UATxB;AAUjBT,SAAO,oBAAUK;AAVA,C;AADArH,Y,CAcZ0H,Y,GAAe;AACpB/G,qBAAmB,GADC;AAEpBmG,0BAAwB,GAFJ;AAGpBC,0BAAwB;AAHJ,C;kBAdH/G,Y","file":"InkContainer.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\r\nimport cn from 'classnames';\r\n\r\nimport { ENTER, SPACE } from '../constants/keyCodes';\r\nimport isFormPartRole from '../utils/isFormPartRole';\r\nimport calcPageOffset from '../utils/Positioning/calcPageOffset';\r\nimport isValidClick from '../utils/EventUtils/isValidClick';\r\nimport { setTouchEvent, addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\r\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\r\nimport calculateHypotenuse from '../utils/NumberUtils/calculateHypotenuse';\r\n\r\nimport Ink from './Ink';\r\n\r\n\r\n/**\r\n * The `InkContainer` is used for holding the list of inks that get created by touch,\r\n * click, or keyboard focus.\r\n *\r\n * If the container element has the `type=\"submit\"` attribute, the ink will also be\r\n * triggered when the user presses enter anywhere in the form.\r\n */\r\nexport default class InkContainer extends PureComponent {\r\n  static propTypes = {\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    inkStyle: PropTypes.object,\r\n    inkClassName: PropTypes.string,\r\n    waitForInkTransition: PropTypes.bool,\r\n    disabledInteractions: PropTypes.arrayOf(PropTypes.oneOf(['keyboard', 'mouse', 'touch'])),\r\n    transitionOverlap: PropTypes.number.isRequired,\r\n    transitionEnterTimeout: PropTypes.number.isRequired,\r\n    transitionLeaveTimeout: PropTypes.number.isRequired,\r\n    pulse: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    transitionOverlap: 150,\r\n    transitionEnterTimeout: 450,\r\n    transitionLeaveTimeout: 300,\r\n  };\r\n\r\n  state = { inks: [] };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { disabledInteractions: di } = this.props;\r\n    const { disabledInteractions: ndi } = nextProps;\r\n    if (di === ndi || !this._container) {\r\n      return;\r\n    }\r\n\r\n    const mouseDisabledDiff = this._isListenerDisabledDiff('mouse', di, ndi);\r\n    const touchDisabledDiff = this._isListenerDisabledDiff('touch', di, ndi);\r\n    const keyboardDisabledDiff = this._isListenerDisabledDiff('keyboard', di, ndi);\r\n    this._initOrRemoveEvents(nextProps, keyboardDisabledDiff, mouseDisabledDiff, touchDisabledDiff);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this._removeTimeout) {\r\n      clearTimeout(this._removeTimeout);\r\n    }\r\n\r\n    if (this._container) {\r\n      this._initOrRemoveEvents({ disabledInteractions: ['keyboard', 'mouse', 'touch'] });\r\n      this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Creates an ink from pageX and pageY coordinates. These values should either come\r\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\r\n   * are used to position the ink correctly in the container from touch/click point.\r\n   * If either value is undefined, an ink will be created from the center of the\r\n   * container.\r\n   *\r\n   * It will also automatically remove the ink.\r\n   *\r\n   * @param {number} pageX - The page x coordinate of the click or touch event.\r\n   * @param {number} pageY - The page y coordinate of the click or touch event.\r\n   */\r\n  createInk = (pageX, pageY) => {\r\n    this._createInk(pageX, pageY);\r\n    this._removeTimeout = setTimeout(() => {\r\n      this._removeTimeout = null;\r\n      this._removeInk();\r\n    }, this.props.transitionOverlap);\r\n  };\r\n\r\n  /**\r\n   * Focuses the main element.\r\n   */\r\n  focus = () => {\r\n    this._getKeyboardContainer().focus();\r\n  };\r\n\r\n  _isListenerDisabledDiff(interaction, disabledInteractions, nextDisabledInteractions) {\r\n    const i = disabledInteractions.indexOf(interaction);\r\n    const ni = nextDisabledInteractions.indexOf(interaction);\r\n\r\n    return (i < 0 && ni >= 0) || (i >= 0 && ni < 0);\r\n  }\r\n\r\n  _isListenerDisabled(interaction, disabledInteractions) {\r\n    return disabledInteractions && disabledInteractions.indexOf(interaction) !== -1;\r\n  }\r\n\r\n  /**\r\n   * Creates an ink from pageX and pageY coordinates. These values should either come\r\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\r\n   * are used to position the ink correctly in the container from touch/click point.\r\n   * If either value is undefined, an ink will be created from the center of the\r\n   * container.\r\n   *\r\n   * @param {number} pageX - The page x coordinate of the click or touch event.\r\n   * @param {number} pageY - The page y coordinate of the click or touch event.\r\n   */\r\n  _createInk = (pageX, pageY) => {\r\n    const { offsetWidth, offsetHeight } = this._inkContainer;\r\n\r\n    let x;\r\n    let y;\r\n    if (typeof pageX !== 'undefined' && typeof pageY !== 'undefined') {\r\n      const pageOffset = calcPageOffset(this._inkContainer);\r\n\r\n      x = pageX - pageOffset.left;\r\n      y = pageY - pageOffset.top;\r\n    } else {\r\n      x = offsetWidth / 2;\r\n      y = offsetHeight / 2;\r\n    }\r\n\r\n    const r = Math.max(\r\n      calculateHypotenuse(x, y),\r\n      calculateHypotenuse(offsetWidth - x, y),\r\n      calculateHypotenuse(offsetWidth - x, offsetHeight - y),\r\n      calculateHypotenuse(x, offsetHeight - y)\r\n    );\r\n\r\n    const ink = {\r\n      left: x - r,\r\n      top: y - r,\r\n      size: r * 2,\r\n      key: Date.now(),\r\n    };\r\n\r\n    const inks = this.state.inks.slice();\r\n    inks.push(ink);\r\n    this.setState({ inks });\r\n  };\r\n\r\n  /**\r\n   * Removes an ink from the container.\r\n   */\r\n  _removeInk = () => {\r\n    const inks = this.state.inks.slice();\r\n    inks.pop();\r\n\r\n    this.setState({ inks });\r\n  };\r\n\r\n  /**\r\n   * Gets the container for any keyboard events. This will almost always be the main element,\r\n   * but text fields will need to be the input itself.\r\n   */\r\n  _getKeyboardContainer = () => {\r\n    if (this._container.classList.contains('md-text-field-container')) {\r\n      return this._container.querySelector('.md-text-field');\r\n    }\r\n\r\n    return this._container;\r\n  };\r\n\r\n  /**\r\n   * Sets the ink container and the main container from the ref callback. When the component\r\n   * is mounting, the keyboard, mouse, and keyboard events will be initialized.\r\n   */\r\n  _setContainers = (group) => {\r\n    if (group !== null) {\r\n      this._inkContainer = findDOMNode(group);\r\n      this._container = this._inkContainer.parentElement;\r\n\r\n      if (this._container) {\r\n        this._initOrRemoveEvents(this.props);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * This function will either add or remove the event listeners for creating inks.\r\n   *\r\n   * @param {Object} props - The current props to use for figuring out if the events should\r\n   *    be added or removed.\r\n   * @param {bool=} keyboardDiff - Boolean if there was a difference between the current props and either\r\n   *    the previous or next props for the keyboard interactions being disabled.\r\n   * @param {bool=} mouseDiff - Boolean if there was a difference between the current props and either\r\n   *    the previous or next props for the mouse interactions being disabled.\r\n   * @param {bool=} touchDiff - Boolean if there was a difference between the current props and either\r\n   *    the previous or next props for the touch interactions being disabled.\r\n   */\r\n  _initOrRemoveEvents = (props, keyboardDiff = true, mouseDiff = true, touchDiff = true) => {\r\n    const mouseDisabled = this._isListenerDisabled('mouse', props.disabledInteractions);\r\n    const touchDisabled = this._isListenerDisabled('touch', props.disabledInteractions);\r\n    const keyboardDisabled = this._isListenerDisabled('keyboard', props.disabledInteractions);\r\n\r\n    if (keyboardDiff) {\r\n      const fn = `${keyboardDisabled ? 'remove' : 'add'}EventListener`;\r\n      this._getKeyboardContainer()[fn]('focus', this._handleFocus);\r\n      this._getKeyboardContainer()[fn]('keydown', this._handleKeyDown);\r\n\r\n      if (this._container.getAttribute('type') === 'submit') {\r\n        window[fn]('submit', this._handleSubmit);\r\n      }\r\n\r\n      if (mouseDiff) {\r\n        this._container[`${!mouseDisabled ? 'add' : 'remove'}EventListener`]('mousedown', this._stopPropagationToFocus);\r\n      }\r\n\r\n      if (touchDiff) {\r\n        setTouchEvent(!touchDisabled, this._container, 'start', this._stopPropagationToFocus);\r\n      }\r\n    }\r\n\r\n    if (mouseDiff) {\r\n      const fn = `${mouseDisabled ? 'remove' : 'add'}EventListener`;\r\n      this._container[fn]('mousedown', this._handleMouseDown);\r\n      this._container[fn]('mouseup', this._handleMouseUp);\r\n    }\r\n\r\n    if (touchDiff) {\r\n      setTouchEvent(!touchDisabled, this._container, 'start', this._handleTouchStart);\r\n      setTouchEvent(!touchDisabled, this._container, 'end', this._handleTouchEnd);\r\n    }\r\n  };\r\n\r\n  _maybeDelayClick = () => {\r\n    if (!this.props.waitForInkTransition) {\r\n      return;\r\n    }\r\n\r\n    captureNextEvent('click', this._container);\r\n  };\r\n\r\n  _handleRemove = () => {\r\n    if (this._clicked && this.props.waitForInkTransition) {\r\n      // For some reason if the click event will make the ink unmount, it will no longer\r\n      // have a debug id in the TransitionGroup and it displays a warning. Adding a 1ms timeout\r\n      // fixes that issue... It only happens on an actual click instead of an enter click.\r\n      setTimeout(() => {\r\n        this._container.click();\r\n      }, 1);\r\n    }\r\n\r\n    this._clicked = false;\r\n  };\r\n\r\n  _handleKeyDown = (e) => {\r\n    const key = e.which || e.keyCode;\r\n    const enter = key === ENTER;\r\n    const space = key === SPACE;\r\n    // Don't trigger ink when enter key is pressed and the target has an input inside of it (SelectField)\r\n    if (space || (enter && !isFormPartRole(e.target) && !e.target.querySelector('input'))) {\r\n      this._clicked = true;\r\n      this.createInk();\r\n      this._maybeDelayClick();\r\n    }\r\n  };\r\n\r\n  _handleFocus = () => {\r\n    if (this._clicked) {\r\n      return;\r\n    }\r\n\r\n    this._createInk();\r\n    this._getKeyboardContainer().addEventListener('blur', this._handleBlur);\r\n  };\r\n\r\n  _handleBlur = () => {\r\n    this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\r\n    this._removeInk();\r\n  };\r\n\r\n  _handleMouseDown = (e) => {\r\n    this._clicked = true;\r\n    if (!isValidClick(e) || this._skipNextMouse) {\r\n      this._skipNextMouse = false;\r\n      return;\r\n    }\r\n\r\n    this._mouseLeave = false;\r\n    this._container.addEventListener('mouseleave', this._handleMouseLeave);\r\n    this._createInk(e.pageX, e.pageY);\r\n  };\r\n\r\n  _handleMouseLeave = () => {\r\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\r\n    this._mouseLeave = true;\r\n    this._removeInk();\r\n  };\r\n\r\n  _handleMouseUp = () => {\r\n    if (this._mouseLeave) {\r\n      return;\r\n    }\r\n\r\n    this._maybeDelayClick();\r\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\r\n    this._removeInk();\r\n  };\r\n\r\n  _handleTouchStart = (e) => {\r\n    this._aborted = false;\r\n    this._clicked = true;\r\n    this._skipNextMouse = true;\r\n    addTouchEvent(window, 'move', this._handleTouchMove);\r\n\r\n    const { pageX, pageY } = e.changedTouches[0];\r\n    this._createInk(pageX, pageY);\r\n  };\r\n\r\n  _handleTouchMove = () => {\r\n    removeTouchEvent(window, 'move', this._handleTouchMove);\r\n    const lastInk = this.state.inks[this.state.inks.length - 1];\r\n    if (!lastInk || Date.now() > (lastInk.key + 200)) {\r\n      this._aborted = false;\r\n      return;\r\n    }\r\n\r\n    const inks = this.state.inks.slice();\r\n    const index = inks.length - 1;\r\n\r\n    const abortedInk = Object.assign({}, lastInk, { aborted: true });\r\n    inks.splice(index, 1, abortedInk);\r\n\r\n    this._aborted = true;\r\n    this.setState({ inks }, this._removeInk);\r\n  };\r\n\r\n  _handleTouchEnd = () => {\r\n    this._skipNextMouse = true;\r\n\r\n    if (this._aborted) {\r\n      return;\r\n    } else {\r\n      removeTouchEvent(window, 'move', this._handleTouchMove);\r\n    }\r\n\r\n    this._removeInk();\r\n  };\r\n\r\n  /**\r\n   * If a form was submitted that contains the container of the ink and the current focus element\r\n   * is not the container, trigger an ink effect.\r\n   *\r\n   * The current focus check is added so that two inks are not created.\r\n   */\r\n  _handleSubmit = (e) => {\r\n    if (document.activeElement === this._container || !e.target.contains(this._container)) {\r\n      return;\r\n    }\r\n\r\n    this._maybeDelayClick();\r\n    this.createInk();\r\n  };\r\n\r\n  _stopPropagationToFocus = (e) => {\r\n    switch (e.type) {\r\n      case 'touchstart':\r\n        addTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\r\n        break;\r\n      case 'touchend':\r\n        removeTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\r\n        break;\r\n      case 'mousedown':\r\n        window.addEventListener('mouseup', this._stopPropagationToFocus, true);\r\n        break;\r\n      case 'mouseup':\r\n        window.removeEventListener('mouseup', this._stopPropagationToFocus, true);\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      style,\r\n      className,\r\n      inkStyle,\r\n      inkClassName,\r\n      transitionOverlap,\r\n      transitionEnterTimeout,\r\n      transitionLeaveTimeout,\r\n      pulse,\r\n    } = this.props;\r\n    const inks = this.state.inks.map(props => (\r\n      <Ink\r\n        {...props}\r\n        pulse={pulse}\r\n        style={inkStyle}\r\n        className={inkClassName}\r\n        onRemove={this._handleRemove}\r\n        transitionOverlap={transitionOverlap}\r\n        transitionEnterTimeout={transitionEnterTimeout}\r\n        transitionLeaveTimeout={transitionLeaveTimeout}\r\n      />\r\n    ));\r\n\r\n    return (\r\n      <TransitionGroup\r\n        component=\"div\"\r\n        style={style}\r\n        className={cn('md-ink-container', className)}\r\n        ref={this._setContainers}\r\n      >\r\n        {inks}\r\n      </TransitionGroup>\r\n    );\r\n  }\r\n}\r\n"]}