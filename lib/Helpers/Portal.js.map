{"version":3,"sources":["../../src/js/Helpers/Portal.js"],"names":["isReact16","Portal","_container","_portal","_applyStyles","props","className","_renderPortal","document","createElement","component","node","renderNode","body","lastChild","appendChild","insertBefore","firstChild","children","_removePortal","onClose","removeChild","visible","forceUpdate","nextProps","onOpen","Component","window","propTypes","string","bool","isRequired","element","func","object","defaultProps"],"mappings":"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","file":"Portal.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  createPortal,\r\n  unmountComponentAtNode as unmount,\r\n  unstable_renderSubtreeIntoContainer as render,\r\n} from 'react-dom';\r\n\r\nconst isReact16 = typeof createPortal === 'function';\r\n\r\n/**\r\n * Creates a \"Portal\" for the children to be rendered in. Basically it will render the\r\n * children only when the `visible` prop is `true`. When it is visible, a new `component`\r\n * will be rendered as the first child in the body with the children inside.\r\n *\r\n * Unlike all the other components, `style` will not be applied for the `Portal`.\r\n */\r\nexport default class Portal extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * An optional className to apply to the newly created `component` when visible.\r\n     */\r\n    className: PropTypes.string,\r\n\r\n    /**\r\n     * Boolean if the children are visible.\r\n     */\r\n    visible: PropTypes.bool.isRequired,\r\n\r\n    /**\r\n     * The children to render when visible.\r\n     */\r\n    children: PropTypes.element,\r\n\r\n    /**\r\n     * The component to render as. This should be a valid DOM element.\r\n     */\r\n    component: PropTypes.string.isRequired,\r\n\r\n    /**\r\n     * An optional function to call when the portal is opened.\r\n     */\r\n    onOpen: PropTypes.func,\r\n\r\n    /**\r\n     * An optional function to call when the portal is closed\r\n     */\r\n    onClose: PropTypes.func,\r\n\r\n    /**\r\n     * An optional DOM Node to render the portal into. The default is to render as\r\n     * the first child in the `body`.\r\n     */\r\n    renderNode: PropTypes.object,\r\n\r\n    /**\r\n     * Boolean if the portal should render the children as the last child of the `renderNode`\r\n     * or `body` instead of the first.\r\n     */\r\n    lastChild: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    component: 'span',\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.visible) {\r\n      this._renderPortal(this.props);\r\n\r\n      if (isReact16) {\r\n        // Need to update after the renderPortal created the DOM element.\r\n        this.forceUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { visible, onOpen } = nextProps;\r\n    if (this.props.visible === visible) {\r\n      if (visible && !isReact16) {\r\n        // Need to just re-render the subtree\r\n        this._renderPortal(nextProps);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (visible) {\r\n      if (onOpen) {\r\n        onOpen();\r\n      }\r\n\r\n      this._renderPortal(nextProps);\r\n    } else {\r\n      this._removePortal();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props.visible && this.props.onClose) {\r\n      this.props.onClose();\r\n    }\r\n    this._removePortal();\r\n  }\r\n\r\n  _container = null;\r\n  _portal = null;\r\n\r\n  _applyStyles = (props) => {\r\n    if (props.className) {\r\n      this._container.className = props.className;\r\n    }\r\n  };\r\n\r\n  _renderPortal = (props) => {\r\n    if (!this._container) {\r\n      this._container = document.createElement(props.component);\r\n\r\n      this._applyStyles(props);\r\n      const node = (props.renderNode || document.body);\r\n      if (props.lastChild) {\r\n        node.appendChild(this._container);\r\n      } else {\r\n        node.insertBefore(this._container, node.firstChild);\r\n      }\r\n    } else {\r\n      this._applyStyles(props);\r\n    }\r\n\r\n    if (!isReact16) {\r\n      this._portal = render(this, props.children, this._container);\r\n    }\r\n  };\r\n\r\n  _removePortal = () => {\r\n    if (this.props.onClose) {\r\n      this.props.onClose();\r\n    }\r\n\r\n    if (this._container) {\r\n      if (!isReact16) {\r\n        unmount(this._container);\r\n      }\r\n\r\n      (this.props.renderNode || document.body).removeChild(this._container);\r\n    }\r\n\r\n    this._portal = null;\r\n    this._container = null;\r\n  };\r\n\r\n  render() {\r\n    const { component: Component, className, children, visible } = this.props;\r\n\r\n    // When doing server side rendering, actually render the component as a direct child of its parent.\r\n    // Once it has been rendered and working client side, it will be removed correctly.\r\n    if (typeof window === 'undefined' && visible) {\r\n      return <Component className={className}>{children}</Component>;\r\n    } else if (isReact16 && visible && this._container && typeof window !== 'undefined') {\r\n      return createPortal(children, this._container);\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n"]}