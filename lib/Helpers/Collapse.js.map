{"version":3,"sources":["../../src/js/Helpers/Collapse.js"],"names":["Collapse","props","_setHeight","child","_child","ref","height","paddingTop","paddingBottom","node","cs","window","getComputedStyle","offsetHeight","parseInt","getPropertyValue","Math","max","minHeight","setState","collapsed","state","initialOpen","nextProps","value","config","min","nextValue","children","defaultStyle","motionStyle","style","springConfig","animate","_spring","only","nextStyle","overflow","propTypes","object","bool","isRequired","element","number","defaultProps","precision"],"mappings":"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","file":"Collapse.js","sourcesContent":["import React, { PureComponent, Children, cloneElement } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { findDOMNode } from 'react-dom';\r\nimport { Motion, spring } from 'react-motion';\r\n\r\n/**\r\n * The `Collapse` component is used to animate a single child entering\r\n * or leaving. This uses the `react-motion` library to animate the height,\r\n * padding-top, and padding-bottom of an element when the `collapsed` prop\r\n * changes.\r\n */\r\nexport default class Collapse extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * An optional style to merge with the `Motion` style.\r\n     */\r\n    style: PropTypes.object,\r\n\r\n    /**\r\n     * An optional default style to merge with the `Motion` default style.\r\n     */\r\n    defaultStyle: PropTypes.object,\r\n\r\n    /**\r\n     * Boolean if the children are currently collapsed.\r\n     */\r\n    collapsed: PropTypes.bool.isRequired,\r\n\r\n    /**\r\n     * A single child to collapse or expand.\r\n     */\r\n    children: PropTypes.element.isRequired,\r\n\r\n    /**\r\n     * The spring config to use for the animation.\r\n     */\r\n    springConfig: PropTypes.object.isRequired,\r\n\r\n    /**\r\n     * Boolean if the single child entering or leaving should be animated.\r\n     */\r\n    animate: PropTypes.bool,\r\n\r\n    /**\r\n     * The min height to apply for the collapse div.\r\n     */\r\n    minHeight: PropTypes.number.isRequired,\r\n  };\r\n\r\n  static defaultProps = {\r\n    animate: true,\r\n    springConfig: {\r\n      precision: 0.5,\r\n    },\r\n    minHeight: 0,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (!props.collapsed) {\r\n      this.state = { initialOpen: true };\r\n    } else {\r\n      this.state = {\r\n        height: props.minHeight,\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n      };\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.initialOpen && nextProps.collapsed) {\r\n      this.setState({ initialOpen: false });\r\n    }\r\n  }\r\n\r\n  _spring(collapsed, initialOpen, value, config, min = 0) {\r\n    const nextValue = !collapsed ? Math.max(min, value) : min;\r\n    if (initialOpen && !collapsed) {\r\n      return nextValue;\r\n    }\r\n\r\n    return spring(nextValue, config);\r\n  }\r\n\r\n  _setHeight = (child) => {\r\n    if (this._child && typeof this._child.ref === 'function') {\r\n      this._child.ref(child);\r\n    }\r\n\r\n    let height = 0;\r\n    let paddingTop = 0;\r\n    let paddingBottom = 0;\r\n    if (child !== null) {\r\n      const node = findDOMNode(child);\r\n      const cs = window.getComputedStyle(node);\r\n      height = node.offsetHeight;\r\n      paddingTop = parseInt(cs.getPropertyValue('padding-top'), 10);\r\n      paddingBottom = parseInt(cs.getPropertyValue('padding-bottom'), 10);\r\n    }\r\n\r\n    height = Math.max(this.props.minHeight, height);\r\n\r\n    this.setState({ height, paddingTop, paddingBottom });\r\n  };\r\n\r\n  render() {\r\n    const { height, paddingTop, paddingBottom, initialOpen } = this.state;\r\n    const {\r\n      children,\r\n      collapsed,\r\n      defaultStyle,\r\n      style: motionStyle,\r\n      springConfig,\r\n      animate,\r\n      minHeight,\r\n    } = this.props;\r\n\r\n    if (!animate) {\r\n      return collapsed ? null : children;\r\n    }\r\n\r\n    return (\r\n      <Motion\r\n        style={{\r\n          ...motionStyle,\r\n          height: this._spring(collapsed, initialOpen, height, springConfig, minHeight),\r\n          paddingTop: this._spring(collapsed, initialOpen, paddingTop, springConfig),\r\n          paddingBottom: this._spring(collapsed, initialOpen, paddingBottom, springConfig),\r\n        }}\r\n        defaultStyle={{\r\n          ...defaultStyle,\r\n          height,\r\n          paddingTop,\r\n          paddingBottom,\r\n        }}\r\n      >\r\n        {style => {\r\n          if (collapsed && !style.height) {\r\n            return null;\r\n          }\r\n\r\n          const child = Children.only(children);\r\n          this._child = child;\r\n          let nextStyle = child.props.style;\r\n          if ((collapsed && (!minHeight || style.height !== minHeight)) || style.height !== height) {\r\n            nextStyle = {\r\n              ...child.props.style,\r\n              ...style,\r\n              overflow: 'hidden',\r\n            };\r\n          }\r\n          return cloneElement(child, {\r\n            ref: !collapsed ? this._setHeight : null,\r\n            style: nextStyle,\r\n          });\r\n        }}\r\n      </Motion>\r\n    );\r\n  }\r\n}\r\n"]}